{% load static %}
doctype html
html
  head
    meta(charset="utf-8")
    meta(content="width=device-width, initial-scale=1", name="viewport")
    title CONNECT - Profile
    link(href="{% static 'file/logo.ico' %}",rel="icon")
    {% load sass_tags %}
    link(href="{% sass_src 'sass/profile.sass' %}",rel="stylesheet",type="text/css")
    link(href="{% sass_src 'sass/navbar.sass' %}",rel="stylesheet",type="text/css")

  {% include 'navbar.pug' %}

  body
    #profilepanel
      #top-region
        #intro
          #info
            {% load static %}
            img#user-img(src="{{ user.img.url }}")
            #user-name {{ user.full_name }}
            #school-info
              #department {{ user.department }}
              #grade {{ user.grade }}
          #description-tag
            #description-background
              p#description {{ user.personal_description }}
            .tag-field
              p 個性
              {% for personality in personality %}
              .tag-style
                p.tags {{ personality }}
              {% empty %}
              p 他好像還沒設定個性
              {% endfor %}
            .tag-field
              p 專長
              {% for skill in skill %}
              .tag-style
                p.tags {{ skill }}
              {% empty %}
              p 他好像還沒設定專長
              {% endfor %}
            .tag-field
              p 有興趣活動
              {% for interest in interest %}
              .tag-style
                p.tags {{ interest }}
              {% empty %}
              p 他好像還沒設定有興趣的活動
              {% endfor %}

            #buttons
              input(type="button", value="建立連結")
              input(type="button", value="傳訊息")
      #bottom-region
        #left-pane
          p 聯絡人
          p#friend-count 120
          #friends-avatar.left-region
            {% for friend in user.friends.all %}
            .friend-img {{ friend.img }}
            {% empty %}
            p 快去建立連結吧
            {% endfor %}
          hr#divider1.lefthr
          p 個性
          #personality.left-region
            {% for personality in personality %}
            .tag-style
              p.tags {{ personality }}
            {% empty %}
            p 他好像還沒設定個性
            {% endfor %}
          hr#divider2.lefthr
          p 專長
          #shill.left-region
            {% for skill in skill %}
            .tag-style
              p.tags {{ skill }}
            {% empty %}
            p 他好像還沒設定專長
            {% endfor %}
          hr#divider3.lefthr
          p 有興趣活動
          #interest.left-region
            {% for interest in interest %}
            .tag-style
              p.tags {{ interest }}
            {% empty %}
            p 他好像還沒設定有興趣的活動
            {% endfor %}
            
          .tags#personality-left

        #right-pane
          #indextag
            #tag1.tag
            #tag2.tag
            #tag3.tag
            #tag4.tag
            #tag5.tag
        
          #tab-navbar
            input(type="button", value="參與活動")
            input(type="button", value="參與專案")
            input(type="button", value="個人專案")
            input(type="button", value="...")
            input(type="button", value="...")

          #activities.page
            #activity-cards
              {% for activity in activities %}
              #activity-card.card-panel
                h4#activity-title {{ activity.title }}
                #activity-img.panel-img
                #activity-date {{ actvity.event_date }}
                {% if activity.comments.count > 0 %}
                #activity-rate
                  p {{ activity.get_avg_rating }}
                {% endif %}
                #activity-character
                  p 主辦人
                
                #activity-comments-panel
                  {% for comment in activity.comments.all %}
                  #activity-comment
                    img#activity-participant-img(src="{{ commennt.author.img.url }}")
                    p#activity-participant-name {{ comment.author.full_name }}
                    p#activity-participant-comment {{ comment.text }}
                    #pactivity-articipatn-rate
                      p {{ comment.rate }}
                  {% empty %}
                  p 這個活動好像還沒有評論
                  {% endfor %}

              {% empty %}
              p 看來他好像還沒參加過活動喔
              {% endfor %}
                
              // so many comments

              // so many cards (use for to solve it after the backend has constructed)
          
          #projects.page(style="display: none")
            #project-cards
              {% for project in projects %}
              #projects-card.card-panel
                h4#projects-title {{ project.title }}
                #projects-img.panel-img
                #projects-date {{ project.event_date }}
                {% if activity.comments.count > 0 %}
                #projects-rate
                  p {{ project.get_avg_rating }}
                {% endif %}
                .tags#projects-tag
                  {% for tag in project.event_tag.all %}
                  p {{ tag.name }}
                  {% endfor %}
                
                #projects-comments-panel
                  {% for comment in project.comments.all %}
                  #projects-comment
                    img#projects-participant-img(src="{{ commennt.author.img.url }}")
                    p#projects-participant-name {{ comment.author.full_name }}
                    p#projects-participant-comment {{ comment.text }}
                    #projects-participatn-rate
                      p {{ comment.rate }}
                  {% empty %}
                  p 這個活動好像還沒有評論
                  {% endfor %}

              {% empty %}
              p 看來他好像還沒參與過專案
              {% endfor %}
                  
              // so many comments

              // so many cards (use for to solve it after the backend has constructed)

          #personal.page(style="display: none")
            #personal-cards
              {% for personal_proj in personal_projs %}
              #personal-card.card-panel
                  h4#personal-title {{ personal_proj.title }}
                  #personal-img.panel-img
                  #personal-date {{ personal_proj.event_date }}
                  p#personal-detail {{ personal_proj.detail }}
              {% empty %}
              p 看來他好像還沒新增過個人專案
              {% endfor %}

            // so many cards (use for to solve it after the backend has constructed)


    script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js")
    script(src="https://code.jquery.com/ui/1.12.1/jquery-ui.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.js")
    script(src="{% static 'js/profile.js' %}")
